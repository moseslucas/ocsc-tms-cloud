- provide :title, "Add Payment to #{@doc.branch[0][0..2].upcase}-#{@doc.ref_id}"

.page-content-inner
  .row
    .col-xs-12
      .portlet.light.portlet-fit.portlet-form
        .portlet-title.row
          .col-sm-4
            %h4.green= "Total: #{@doc.total_amount}"
          .col-sm-4
            %h4= "Paid: #{@paid}"
          .col-sm-4
            %h4= "Balance: #{@doc.total_amount - @paid}"
        .portlet-body
          = form_for @payment, html: {class: "form-horizontal"} do |f|
            .form-body

              .form-group{ class:  if @payment.errors.key?("name") then "has-error" end }
                = f.label :amount, "Amount", class: "control-label col-md-3"
                .col-md-4
                  = f.number_field :amount, class: "form-control", value: (@doc.total_amount - @paid)
                - if @payment.errors.key? "name"
                  %label.control-label= @payment.errors["amount"].shift.strip

              -# .form-group{ class:  if @payment.errors.key?("address") then "has-error" end }
              -#   = f.label :address, "Address", class: "control-label col-md-3"
              -#   .col-md-4
              -#     = f.text_field :address, class: "form-control"
              -#   - if @payment.errors.key? "address"
              -#     %label.control-label= @payment.errors["address"].shift.strip
              -#
              -# .form-group{ class:  if @payment.errors.key?("contact") then "has-error" end }
              -#   = f.label :contact, "Contact", class: "control-label col-md-3"
              -#   .col-md-4
              -#     = f.text_field :contact, class: "form-control"
              -#   - if @payment.errors.key? "contact"
              -#     %label.control-label= @payment.errors["contact"].shift.strip
              -#
              -# .form-group{ class:  if @payment.errors.key?("email") then "has-error" end }
              -#   = f.label :email, "Email", class: "control-label col-md-3"
              -#   .col-md-4
              -#     = f.text_field :email, class: "form-control"
              -#   - if @payment.errors.key? "email"
              -#     %label.control-label= @payment.errors["email"].shift.strip
              -#
              -# .form-group{ class:  if @payment.errors.key?("credit_limit") then "has-error" end }
              -#   = f.label :credit_limit, "Credit Limit", class: "control-label col-md-3"
              -#   .col-md-4
              -#     = f.number_field :credit_limit, class: "form-control"
              -#   - if @payment.errors.key? "credit_limit"
              -#     %label.control-label= @payment.errors["credit_limit"].shift.strip
              -#
              -# .form-group{ class:  if @payment.errors.key?("discount_id") then "has-error" end }
              -#   = f.label :discount_id, "Type", class: "control-label col-md-3"
              -#   .col-md-4
              -#     -# = f.select :discount_id, options_for_select(["percent"]), {}, class: "form-control"
              -#     = f.collection_select :discount_id, Discount.active, :id, :name, {include_blank: "Select Discount"}, {class: "form-control"}
              -#   - if @payment.errors.key? "discount_id"
              -#     %label.control-label= @payment.errors["discount_id"].shift.strip
              -#
              -# .form-group{ class:  if @payment.errors.key?("description") then "has-error" end }
              -#   = f.label :description, "Remarks", class: "control-label col-md-3"
              -#   .col-md-4
              -#     = f.text_area :description, class: "form-control"
              -#   - if @payment.errors.key? "description"
              -#     %label.control-label= @payment.errors["description"].shift.strip


            .form-actions
              .row
                .col-md-offset-3.col-md-9
                  =  f.submit "ADD PAYMENT", class: "btn green"
                  =  link_to "Back", clients_path, class: "btn"
